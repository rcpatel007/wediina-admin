<div id="main">
  <!-- START WRAPPER -->
  <div class="wrapper">
    <app-header></app-header>

    <section id="content">
      <!--start container-->
      <div class="container">
        <div class="section">
          <!--card stats start-->
          <div id="card-stats">
            <div class="row">
              <a>
              <div class="col s12 m6 l3" (click)="goTo('neworder')">
                <div class="card">
                  <div class="padding-4">
                    <div class="col s4 m4">
                      <div class="card-icon orange-back">
                        <i class="fa fa-shopping-cart"></i>
                      </div>
                    </div>
                    <div  class="col s8 m8 right-align card-text-contain">
                      <p class="no-margin card-text">New Order</p>
                      <h5 class="mb-0 card-text-total">{{newcount}}</h5>
                    </div>
                  </div>
                </div>
              </div>
            </a>
              <a>
              <div class="col s12 m6 l3" (click)="goTo('enquiry')">
                <div class="card">
                  <div class="padding-4">
                    <div class="col s4 m4">
                      <div class="card-icon green-back">
                        <i class="fa fa-user-cog"></i>
                      </div>
                    </div>
                      <div class="col s8 m8 right-align card-text-contain">
                        <p class="no-margin card-text">New Enquiries</p>
                        <h5 class="mb-0 card-text-total">{{enquiry}}</h5>
                      </div>
                  </div>
                </div>
              </div>
              </a>
              <a>
              <div class="col s12 m6 l3" (click)="goTo('penddingorder')">
                <div class="card">
                  <div class="padding-4">
                    <div class="col s4 m4">
                      <div class="card-icon red-back">
                        <i class="fa fa-shopping-cart"></i>
                      </div>
                    </div>
                    <div class="col s8 m8 right-align card-text-contain">
                      <p class="no-margin card-text">Pending Orders</p>
                      <h5 class="mb-0 card-text-total">{{pendding}}</h5>

                    </div>
                  </div>
                </div>
              </div>
              </a>
              <a>
              <div class="col s12 m6 l3">
                <div class="card">
                  <div class="padding-4">
                    <div class="col s4 m4">
                      <div class="card-icon blue-back">
                        <i class="fa fa-shopping-cart"></i>
                      </div>
                    </div>
                    <div class="col s8 m8 right-align card-text-contain">
                      <p class="no-margin card-text">Completed Order </p>
                      <h5 class="mb-0 card-text-total">{{complate}}</h5>

                    </div>
                  </div>
                </div>
              </div>
              </a>

            </div>
          </div>
          <!--card stats end-->
          <!--DataTables example Row grouping-->
          <div class="section">
            <div class="row">
              <div class="col s12 card mr-t-50" id="neworder">
                <div class="col s3 m3">
                  <div class="col s3 m3 section-icon orange-back">
                    <i class="fa fa-shopping-cart"></i>
                  </div>
                  <div class="col s9 m9 section-text">
                    New Order
                  </div>
                </div>
                <div class="col s3 right">
                  <input type="text" placeholder="Search By Name or Company Name" id="search" [(ngModel)]="term">
                </div>

                <table class="display mr-t-90 striped" cellspacing="0" width="100%">
                  <thead>
                    <tr>
                      <th>NO</th>
                      <th>Name</th>
                      <th>Company</th>
                      <th>Order Date</th>
                      <th colspan="3">Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    <ng-container *ngFor="let o of order ; let i=index ">
                      <ng-container *ngFor="let a of account |filter:term">
                        <tr *ngIf="o.user_id == a._id">
                          <td [routerLink]="['/vieworder', o._id]">{{i+1}}</td>
                          <td [routerLink]="['/vieworder', o._id]">{{a.name}}</td>
                          <td [routerLink]="['/vieworder', o._id]">{{a.company_name}}</td>
                          <td [routerLink]="['/vieworder', o._id]">{{o.order_date}}</td>
                          <td *ngIf="o_view == true" (click)="viewOrder(o._id) " data-target="view_order" class=" modal-trigger">
                            <i class="fa fa-eye blue-text"></i>
                          </td>
                        </tr>
                      </ng-container>
                    </ng-container>
                  </tbody>
                </table>
              </div>
              <!-- Enquiries -->
              <div *ngIf="o_view == true" id="enquiry" class="col s12 card mr-t-50  ">
                <div class="col s3 m3">
                  <div class="col s3 m3 section-icon green-back">
                    <i class="fa fa-user-cog"></i>
                  </div>
                  <div class="col s9 m9 section-text">
                    New Enquiries
                  </div>
                </div>
                <div class="col s3 right">
                  <input type="text" placeholder="Search By Name or Company Name" id="search" [(ngModel)]="term1">
                </div>

                <table id="" class="display mr-t-90 striped" cellspacing="0" width="100%">
                  <thead>
                    <tr>
                      <th>NO</th>
                      <th>Name</th>
                      <th>Company</th>
                      <th>Order Date</th>
                      <th colspan="2">Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    <ng-container *ngFor="let e of enquriryData; let i=index ">
                      <ng-container *ngFor="let a of account |filter:term1">
                        <tr *ngIf="e.user_id == a._id">
                          <td [routerLink]="['/vieworder', e._id]">{{i+1}}</td>
                          <td [routerLink]="['/vieworder', e._id]">{{a.name}}</td>
                          <td [routerLink]="['/vieworder', e._id]">{{a.company_name}}</td>
                          <td [routerLink]="['/vieworder', e._id]">{{e.order_date}}</td>
                          <td *ngIf="o_view == true" (click)="viewOrder(e._id) " data-target="view_order" class=" modal-trigger">
                            <i class="fa fa-eye blue-text"></i>
                          </td>
                        </tr>
                      </ng-container>
                    </ng-container>
                  </tbody>
                </table>
              </div>
              <!-- Enquiries end -->
              <!-- pendding order -->
              <div *ngIf="o_view == true" id="penddingorder" class="col s12 card mr-t-50  scrollspy">
                <div class="col s3 m3">
                  <div class="col s3 m3 section-icon red-back">
                    <i class="fa fa-shopping-cart"></i>
                  </div>
                  <div class="col s9 m9 section-text">
                    Pendding Order
                  </div>
                </div>
                <div class="col s3 right">
                  <input type="text" placeholder="Search By Name or Company Name" id="search" [(ngModel)]="term2">
                </div>

                <table id="" class="display mr-t-90 striped" cellspacing="0" width="100%">
                  <thead>
                    <tr>
                      <th>NO</th>
                      <th>Name</th>
                      <th>Company</th>
                      <th>Order Date</th>
                      <th colspan="2">Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    <ng-container *ngFor="let e of penddingOrder ; let i=index ">
                      <ng-container *ngFor="let a of account |filter:term2">
                        <tr *ngIf="e.user_id == a._id">

                          <td [routerLink]="['/vieworder', e._id]">{{i+1}}</td>
                          <td [routerLink]="['/vieworder', e._id]">{{a.name}}</td>
                          <td [routerLink]="['/vieworder', e._id]">{{a.company_name}}</td>
                          <td [routerLink]="['/vieworder', e._id]">{{e.order_date}}</td>

                          <td *ngIf="o_view == true" (click)="viewOrder(e._id) " data-target="view_order" class=" modal-trigger">
                            <i class="fa fa-eye blue-text"></i>
                          </td>
                        </tr>
                      </ng-container>
                    </ng-container>
                  </tbody>
                </table>
              </div>
              <!-- pendding order -->
            </div>
          </div>
        </div>
      </div>
      <!--end container-->
    </section>
  </div>
</div>


<div id="view_order" class="modal">
  <div class="modal-content">
    <div class="col s12">
      <h5> Product Details</h5>
    </div>
    <div class="col s12">
      <table id="" class="display mr-t-90 striped" cellspacing="0" width="100%">
        <thead>
          <tr>
            <th>Name</th>
            <th>Qty</th>
            <th>Price</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let p of product_details">
            <td>{{p.prod_name}}</td>
            <td>{{p.qty}}</td>
            <td>{{p.price}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<script>
  // $(document).ready(function () {
  //   // the "href" attribute of the modal trigger must specify the modal ID that wants to be triggered
  //   $('.modal').modal();
  // });
  $(document).ready(function () {
    $('.scrollspy').scrollSpy();
  });
</script>