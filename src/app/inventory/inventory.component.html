<div id="main">
  <!-- START WRAPPER -->
  <div class="wrapper">
    <app-header></app-header>

    <section id="content" class="mr-t-20">
      <!--start container-->
      <div class="container">
        <div class="section">
          <!--card stats start-->
          <div id="card-stats">
            <div class="row">
              <div class="col s6 l6 m6">
                <div class="col s2 l2 m2 headding-icon dark-blue-back">
                  <i class="fa fa-boxes"></i>
                </div>
                <div class="hedding-text p-l-80">
                  INVENTORY MANAGEMENT
                </div>
              </div>
              <div class="col s6 l6 m6 right-align">
                <button  *ngIf="i_add == true"[routerLink]="['/addproduct']" class="hedding-btn-2">Add Item </button>
                <button class="hedding-btn" (click)="printContent('product-download')">Download </button>
              </div>

            </div>
          </div>
          <!--card stats end-->

          <!--DataTables example Row grouping-->
          <div class="section">
            <div class="row ">
              <div class="col s12 card mr-t-50" id="product-download">
                  <div class="col s3 right">
                      <input type="text" placeholder="Search" id="search" [(ngModel)]="term">
                    </div>
    
                <table id="" class="display striped mr-t-20" cellspacing="0" width="100%">
                  <thead>
                    <tr>
                      <th>Image</th>
                      <th>Name</th>
                      <th>Category</th>
                      <th colspan="2">Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    <ng-container *ngFor="let i of product |filter:term">
                      <ng-container *ngFor="let c of category">

                        <tr *ngIf="i.category_id === c._id">
                            
                            <td class="prod_img">
                            <img src="{{i.product_image}}" class="img-thumbnail border-none  img-fluid" width="80" height="80" />
                            <div class="edit">
                              <button data-target="singleimg" class="modal-trigger b-radius-40" (click)="getproductById(i._id)">
                                <i class="fa fa-pencil-alt orange-text" title="single images"></i>
                              </button> &nbsp;&nbsp;&nbsp;
                              <button data-target="otherimg" class="modal-trigger b-radius-40" (click)="getproductById(i._id)">
                                <i class="fa fa-external-link-alt orange-text" title="other images"></i>
                              </button> &nbsp;&nbsp;&nbsp;
                            </div>
                          </td>
                          <td>{{i.name}} </td>
                          <td>{{c.name}}</td>
                          <td *ngIf="i_view == true" [routerLink]="['/viewproduct', i._id]">
                            <i class="fa fa-eye blue-text"></i>
                          </td>

                          <td *ngIf="i_edit == true" [routerLink]="['/editproduct', i._id]">
                            <i class="fa fa-pencil-alt orange-text"></i>
                          </td>
                          <td *ngIf="i_delete == true" (click)="delete(i._id)">
                            <i class="fa fa-trash red-text "></i>
                          </td>
                        </tr>
                      </ng-container>
                    </ng-container>
                  </tbody>
                </table>
              </div>

            </div>
          </div>
        </div>

      </div>


      <!--end container-->
    </section>


    <!-- single image -->
    <div id="singleimg" class="modal">
      <div class="modal-content">

        <div class="col s12">
          <h5>images</h5>
        </div>
        <div class="row">

          <form (ngSubmit)="updateImage()">
            <input type="hidden" name="id" [(ngModel)]="id">
            <div class="row">
              <div class="col s6 m6 l6">
                <label>
                  <Strong></Strong>
                </label>
                <img class="d-block img-responsive img-thumbnail" width="150" height="150" src="{{p_img}}" />

              </div>
              <div class="col s6 m6 l6">

                <input type="file" class="p-20" required="required" (change)="imageUpload($event)" name="prod_img" placeholder="Add Image">
                <button type="submit" class="btn btn-default modal-close">Update</button> &nbsp;

              </div>
            </div>
            <br />
          </form>

        </div>
      </div>

    </div>


    <!-- other images -->
    <div id="otherimg" class="modal">
      <div class="modal-content">

        <div class="col s12">
          <h5>images</h5>
        </div>
        <div class="row">

          <form (ngSubmit)="updateOtherImage()">
            <input type="hidden" name="id" [(ngModel)]="id">

            <div class="form-group">
              <div class="row mr-t-10">
                <ng-container *ngFor="let o_image of o_img">
                  <div class="col s4 m4 l4 " id="info">
                    <div class="close-image" (click)="deleteimg(o_image)">
                      <i class=" fa fa-window-close"></i>
                    </div>
                    <img class="d-block img-resposive img-thumbnail" width="150" height="150" src="{{o_image}}" />
                  </div>
                </ng-container>
              </div>
            </div>
            <div class="form-group">

              <input type="file" multiple="multiple" class="form-control" required="required" (change)="otherImageUpload($event)" name="other_prod_img"
                placeholder="Add Image">

            </div>
            <button type="submit" class="btn btn-default modal-close">Update</button> &nbsp;

            <br />
          </form>

        </div>
      </div>

    </div>
    <script>
      $(document).ready(function () {
        $('.modal').modal();
      });
    </script>